################## Almalinux 9.4 ###################
1.เตรียมระบบพื้นฐาน (ถ้ายังไม่ได้ลง)
	sudo dnf update -y
	sudo dnf install -y git unzip

2.ติดตั้ง Apache + PHP (Laravel แนะนำ PHP ≥ 8.1)
	sudo dnf install -y epel-release
	sudo dnf install -y https://rpms.remirepo.net/enterprise/remi-release-9.rpm
	sudo dnf module enable -y php:remi-8.1
	sudo dnf install -y php php-cli php-common php-mbstring php-xml php-bcmath php-curl php-zip php-mysqlnd php-pdo php-tokenizer php-opcache unzip git curl

3.ติดตั้ง Composer
	cd /tmp
	php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
	php composer-setup.php
	sudo mv composer.phar /usr/local/bin/composer
	composer --version

4.Clone Project ลง /var/www/html/rims
	cd /var/www/html
	sudo git clone https://github.com/xmodify/h-rims.git rims

5.ตั้ง permission ให้ Apache ใช้งานได้
	sudo chown -R apache:apache /var/www/html/rims
	sudo chmod -R 775 /var/www/html/rims
	sudo chmod -R 775 /var/www/html/rims/storage
	sudo chmod -R 775 /var/www/html/rims/bootstrap/cache

6.ติดตั้ง Laravel dependencies
	cd /var/www/html/rims
	sudo -u apache /usr/local/bin/composer install

7.ตั้งค่าไฟล์ .env
	sudo -u apache cp .env.example .env
	sudo -u apache php artisan key:generate
	sudo nano .env

8.git pull ผ่าน User
	sudo -u apache git -C /var/www/html/rims reset --hard
	sudo -u apache git -C /var/www/html/rims pull origin main
	sudo -u apache /usr/local/bin/composer install --no-dev --optimize-autoloader
	sudo -u apache rm -f /var/www/html/rims/bootstrap/cache/*.php
	sudo -u apache php artisan optimize:clear
	
9.ตั้งค่า Apache หรือ Nginx ให้ชี้มาที่ public/
	sudo dnf install -y httpd
	sudo systemctl enable httpd
	sudo systemctl start httpd

10.If you're using Node.js for frontend (Laravel 11+ requires Node >= 18):
	sudo dnf module reset nodejs -y
	sudo dnf module enable nodejs:20 -y
	sudo dnf install -y nodejs
	
	# แก้ไขสิทธิ์ npm cache สำหรับ user apache
	sudo chown -R apache:apache /usr/share/httpd
	
	cd /var/www/html/rims
	sudo -u apache npm install
	sudo -u apache npm run build

	ตัวอย่างไฟล์ VirtualHost (เช่น /etc/httpd/conf.d/laravel.conf)
		Listen 8883
		<VirtualHost *:8883>
			ServerName yourdomain.com
			DocumentRoot /var/www/html/rims/public

			<Directory /var/www/html/rims/public>
				AllowOverride All
				Require all granted
			</Directory>

			ErrorLog logs/h-rims-error.log
			CustomLog logs/h-rims-access.log combined
		</VirtualHost>

	จากนั้น:
		sudo systemctl restart httpd

	เปิด firewall (ถ้ายังไม่ได้เปิด):
		sudo systemctl start firewalld
		sudo systemctl enable firewalld
		sudo systemctl status firewalld

		sudo firewall-cmd --permanent --add-port=8883/tcp
		sudo firewall-cmd --reload
		sudo firewall-cmd --permanent --list-all

	ตรวจสอบ SElinux สำหรับ Port พิเศษ (สำคัญ):
		sudo semanage port -a -t http_port_t -p tcp 8883

	ตรวจสอบว่า SELinux ไม่ block ไฟล์ Laravel:
		sudo setsebool -P httpd_can_network_connect 1


up laravel

cd /var/www/html/rims
sudo -u apache git pull origin main
sudo -u apache /usr/local/bin/composer install --no-dev --optimize-autoloader
sudo -u apache php artisan optimize:clear
sudo -u apache rm -f bootstrap/cache/*.php
sudo systemctl restart httpd
# ถ้าใช้ php-fpm ให้รีสตาร์ทด้วยครับ
sudo systemctl restart php-fpm

###########################################################
# 11. การตั้งค่าแบบ Option B (แนะนำ - เลียนแบบ /gtw/)
###########################################################
วิธีนี้คือการทำให้ทั้ง "พอร์ต 80" และ "พอร์ต 8883" มองเห็นโฟลเดอร์เป็น /rims เหมือนกัน

1. แก้ไขไฟล์ VirtualHost ของพอร์ต 8883 (เช่น /etc/httpd/conf.d/laravel.conf):
   Listen 8883
   <VirtualHost *:8883>
       ServerName 192.168.0.4
       
       # เพิ่ม Alias เพื่อให้เข้าผ่าน http://127.0.0.1:8883/rims ได้
       Alias /rims "/var/www/html/rims/public"
       
       DocumentRoot "/var/www/html/rims/public"
       <Directory "/var/www/html/rims/public">
           Options FollowSymLinks
           AllowOverride All
           Require all granted
           
           # เพิ่มบรรทัดนี้เพื่อแก้ปัญหา 404 (สำคัญมากสำหรับ Alias)
           FallbackResource /rims/index.php
       </Directory>
   </VirtualHost>

2. แก้ไขไฟล์ Proxy (พอร์ต 80) ในไฟล์ config หลักของ Apache:
   <VirtualHost *:80>
       ServerName 192.168.0.4
       ProxyPreserveHost On

       # ส่งจาก /rims ไปหา /rims ของพอร์ต 8883
       ProxyPass        /rims/         http://127.0.0.1:8883/rims/
       ProxyPassReverse /rims/         http://127.0.0.1:8883/rims/
       ProxyPass        /rims          http://127.0.0.1:8883/rims
       ProxyPassReverse /rims          http://127.0.0.1:8883/rims
       ProxyPassReverseCookiePath /rims /rims
   </VirtualHost>

3. ตั้งค่าใน .env:
   APP_URL=http://192.168.0.4/rims

4. รีสตาร์ท Apache:
   sudo systemctl restart httpd